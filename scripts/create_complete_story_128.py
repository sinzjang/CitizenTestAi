#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
interview_questions_ko.jsonì˜ 128ë¬¸ì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì™„ì „í•œ ìŠ¤í† ë¦¬ ìƒì„±
ê° ë¬¸ì œì˜ ì •ë‹µì„ ìŠ¤í† ë¦¬ ë³¸ë¬¸ì— ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨
"""

import json
from pathlib import Path

def create_answer_text(answer_text):
    """ë‹µë³€ í…ìŠ¤íŠ¸ë¥¼ answer íƒ€ì… ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜"""
    # ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ë‹µë³€ë“¤ì„ ë¶„ë¦¬
    parts = [p.strip() for p in answer_text.split(',')]
    result = []
    
    for i, part in enumerate(parts):
        if i > 0:
            result.append({"type": "normal", "text": ", "})
        result.append({"type": "answer", "text": part})
    
    return result

def create_story_from_questions(questions_file, output_file):
    """ì§ˆë¬¸ ë°ì´í„°ë¡œë¶€í„° ìŠ¤í† ë¦¬ ìƒì„±"""
    
    print(f"ğŸ“– ì§ˆë¬¸ íŒŒì¼ ì½ê¸°: {questions_file.name}")
    
    with open(questions_file, 'r', encoding='utf-8') as f:
        questions = json.load(f)
    
    # ì§ˆë¬¸ì„ IDë¡œ ì¸ë±ì‹±
    questions_by_id = {q['id']: q for q in questions}
    
    # ìŠ¤í† ë¦¬ êµ¬ì¡° ì •ì˜ (8ê°œ ì±•í„°)
    story_structure = [
        {
            "chapterId": 1,
            "title": "ììœ ë¥¼ ìœ„í•œ ì²­ì‚¬ì§„: í—Œë²•ì˜ íƒ„ìƒ",
            "introduction": "ë¯¸êµ­ì´ë¼ëŠ” ë‚˜ë¼ê°€ ì‹œì‘ë˜ê¸° ì „, ìœ„ëŒ€í•œ ê±´êµ­ì˜ ì•„ë²„ì§€ë“¤ì€ ê°€ì¥ ì¤‘ìš”í•œ 'ì„¤ê³„ë„'ë¥¼ ê·¸ë ¸ìŠµë‹ˆë‹¤. ì´ í—Œë²•ì´ ì—†ì—ˆë‹¤ë©´ ì§€ê¸ˆì˜ ë¯¸êµ­ì€ ì¡´ì¬í•˜ì§€ ì•Šì•˜ì„ ê²ƒì…ë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [1, 2, 3],
                    "narrative": "ë¯¸êµ­ ì •ë¶€ëŠ” {1}ì…ë‹ˆë‹¤ (Q.1). ì´ ë‚˜ë¼ì˜ ê°€ì¥ ì¤‘ìš”í•œ ê·œì¹™ì´ì ìµœê³ ì˜ ë²•ì€ {2}ì…ë‹ˆë‹¤ (Q.2). ì´ í—Œë²•ì€ ì„¸ ê°€ì§€ í•µì‹¬ ì—­í• ì„ í•©ë‹ˆë‹¤: {3} (Q.3)."
                },
                {
                    "questions": [4, 5, 6, 7],
                    "narrative": "í—Œë²•ì„ ë³€ê²½í•˜ê±°ë‚˜ ì¶”ê°€í•˜ëŠ” ê²ƒì„ {4}ì´ë¼ê³  í•©ë‹ˆë‹¤ (Q.4). í—Œë²•ì˜ ì²« 10ê°œ ìˆ˜ì •ì•ˆì„ {5}ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤ (Q.5). ê¶Œë¦¬ì¥ì „ì˜ ì²« ë²ˆì§¸ ìˆ˜ì •ì•ˆì—ëŠ” ì¤‘ìš”í•œ ììœ ë“¤ì´ ë‹´ê²¨ ìˆìŠµë‹ˆë‹¤: {6} (Q.6). ì§€ê¸ˆê¹Œì§€ ë¯¸êµ­ í—Œë²•ì€ ì´ {7}ë²ˆ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤ (Q.7)."
                },
                {
                    "questions": [8, 9],
                    "narrative": "í—Œë²•ì´ ë§Œë“¤ì–´ì§€ê¸° ì „, ë¯¸êµ­ì¸ë“¤ì€ {8}ë¥¼ í†µí•´ ì˜êµ­ìœ¼ë¡œë¶€í„°ì˜ ë…ë¦½ì„ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤ (Q.8). ì´ ì„ ì–¸ì„œëŠ” ëª¨ë“  ì¸ê°„ì´ íƒœì–´ë‚  ë•Œë¶€í„° ê°€ì§€ëŠ” ê¶Œë¦¬ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤: {9} (Q.9)."
                },
                {
                    "questions": [10, 11, 12],
                    "narrative": "ë¯¸êµ­ì¸ë“¤ì´ ê°€ì¥ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ê¶Œë¦¬ ì¤‘ í•˜ë‚˜ì¸ {10}ëŠ” ì–´ë–¤ ì¢…êµë“  ì‹¤ì²œí•  ìˆ˜ ìˆê³ , ì¢…êµë¥¼ ì‹¤ì²œí•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤ (Q.10). ë¯¸êµ­ì€ {11} ì‹œìŠ¤í…œì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤ (Q.11). ì´ ëª¨ë“  ì›ì¹™ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ë ¤ë©´ {12}ê°€ í•„ìš”í•˜ë©°, ì´ëŠ” ëˆ„êµ¬ë„ ë²• ìœ„ì— ìˆì§€ ì•Šê³  ëª¨ë‘ê°€ ë²•ì„ ë”°ë¼ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤ (Q.12)."
                },
                {
                    "questions": [13, 14, 15],
                    "narrative": "ë¯¸êµ­ ì •ë¶€ëŠ” í¬ê²Œ ì„¸ ê°œì˜ ë¶€ì„œë¡œ ë‚˜ë‰©ë‹ˆë‹¤: {13} (Q.13). ì–´ëŠ í•œ ë¶€ì„œê°€ ë„ˆë¬´ ê°•ë ¥í•´ì§€ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ {14}ì™€ {15} ì‹œìŠ¤í…œì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤ (Q.14, Q.15)."
                }
            ]
        },
        {
            "chapterId": 2,
            "title": "ì‚¼ê¶Œë¶„ë¦½: ê¶Œë ¥ì˜ ê· í˜•",
            "introduction": "ê¶Œë ¥ì´ í•œ ê³³ì— ì§‘ì¤‘ë˜ë©´ ìœ„í—˜í•©ë‹ˆë‹¤. ê±´êµ­ì˜ ì•„ë²„ì§€ë“¤ì€ ì´ë¥¼ ë§‰ê¸° ìœ„í•´ ì •ë¶€ë¥¼ ì„¸ ê°œì˜ ë¶€ì„œë¡œ ë‚˜ëˆ„ê³ , ì„œë¡œë¥¼ ê²¬ì œí•˜ê³  ê· í˜•ì„ ë§ì¶”ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [16, 17, 18, 19, 20, 21],
                    "narrative": "ì •ë¶€ì˜ ì„¸ ê¸°ê´€ì€ {16}ì…ë‹ˆë‹¤ (Q.16). ëŒ€í†µë ¹ì€ {17} ê¸°ê´€ì„ ì±…ì„ì§‘ë‹ˆë‹¤ (Q.17). ì—°ë°©ë²•ì„ ë§Œë“œëŠ” ì±…ì„ì€ {18}ì— ìˆìŠµë‹ˆë‹¤ (Q.18). ì˜íšŒëŠ” {19}ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤ (Q.19). ìƒì›ì˜ì›ì€ ì´ {20}ëª…ì´ë©° (Q.20), ê° ì£¼ì—ì„œ {21}ëª…ì”© ì„ ì¶œë©ë‹ˆë‹¤ (Q.21)."
                },
                {
                    "questions": [22, 23, 24, 25],
                    "narrative": "ìƒì›ì˜ì›ì˜ ì„ê¸°ëŠ” {22}ì…ë‹ˆë‹¤ (Q.22). í•˜ì›ì€ ì´ {23}ëª…ì˜ íˆ¬í‘œê¶Œì„ ê°€ì§„ ì˜ì›ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤ (Q.23). í•˜ì›ì˜ì›ì˜ ì„ê¸°ëŠ” {24}ì…ë‹ˆë‹¤ (Q.24). ì–´ë–¤ ì£¼ëŠ” ë‹¤ë¥¸ ì£¼ë³´ë‹¤ ë” ë§ì€ í•˜ì›ì˜ì›ì„ ê°€ì§€ëŠ”ë°, ê·¸ ì´ìœ ëŠ” {25} ë•Œë¬¸ì…ë‹ˆë‹¤ (Q.25)."
                },
                {
                    "questions": [26, 27, 28, 29, 30, 31],
                    "narrative": "ìƒì›ì˜ì›ì€ {26}ì„ ëŒ€í‘œí•©ë‹ˆë‹¤ (Q.26). ìš°ë¦¬ëŠ” {27}ì— ëŒ€í†µë ¹ì„ ì„ ì¶œí•©ë‹ˆë‹¤ (Q.27). ëŒ€í†µë ¹ì˜ ì„ê¸°ëŠ” {28}ì…ë‹ˆë‹¤ (Q.28). ë‹¹ì‹ ì˜ ì§€ì—­ í•˜ì›ì˜ì›ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.29). ë‹¹ì‹  ì£¼ì˜ ìƒì›ì˜ì› ì¤‘ í•œ ëª…ì˜ ì´ë¦„ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.30). ë‹¹ì‹  ì£¼ì˜ ë‹¤ë¥¸ ìƒì›ì˜ì› ì´ë¦„ë„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.31)."
                },
                {
                    "questions": [32, 33, 34, 35, 36],
                    "narrative": "í˜„ì¬ ëŒ€í†µë ¹ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.32). í˜„ì¬ ë¶€í†µë ¹ë„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.33). í•˜ì› ì˜ì›ë“¤ì„ ì„ ì¶œí•˜ëŠ” ì‚¬ëŒì€ {34}ì…ë‹ˆë‹¤ (Q.34). ëŒ€í†µë ¹ì´ ë” ì´ìƒ ì§ë¬´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ìœ¼ë©´ {35}ì´ ìŠ¹ê³„í•©ë‹ˆë‹¤ (Q.35). ëŒ€í†µë ¹ê³¼ ë¶€í†µë ¹ ëª¨ë‘ ì§ë¬´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ìœ¼ë©´ {36}ì´ ëŒ€í†µë ¹ì´ ë©ë‹ˆë‹¤ (Q.36)."
                },
                {
                    "questions": [37, 38, 39, 40],
                    "narrative": "ëŒ€í†µë ¹ì€ {37}ì…ë‹ˆë‹¤ (Q.37). ëŒ€í†µë ¹ì€ ì˜íšŒê°€ í†µê³¼ì‹œí‚¨ ë²•ì•ˆì— {38}í•˜ì—¬ ë²•ìœ¼ë¡œ ë§Œë“¤ê±°ë‚˜ {39}í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (Q.38, Q.39). ëŒ€í†µë ¹ì„ ë•ê¸° ìœ„í•´ {40}ì´ ìˆìœ¼ë©°, ì£¼ìš” ì—­í• ì€ ëŒ€í†µë ¹ì—ê²Œ ì¡°ì–¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤ (Q.40)."
                },
                {
                    "questions": [41, 42, 43, 44, 45],
                    "narrative": "ì£¼ìš” ë‚´ê° ì§ì±…ìœ¼ë¡œëŠ” {41}ì´ ìˆìŠµë‹ˆë‹¤ (Q.41). ì‚¬ë²•ë¶€ì˜ ì£¼ìš” ì—­í• ì€ {42}ì…ë‹ˆë‹¤ (Q.42). ë¯¸êµ­ì˜ ìµœê³  ë²•ì›ì€ {43}ì´ë©° (Q.43), ì´ {44}ëª…ì˜ ëŒ€ë²•ê´€ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤ (Q.44). í˜„ì¬ ëŒ€ë²•ì›ì¥ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.45)."
                }
            ]
        },
        {
            "chapterId": 3,
            "title": "ì—°ë°©ê³¼ ì£¼: ê¶Œë ¥ì˜ ë¶„ë°°",
            "introduction": "ë¯¸êµ­ì€ ì—°ë°©ì •ë¶€ì™€ ì£¼ì •ë¶€ê°€ ê¶Œë ¥ì„ ë‚˜ëˆ„ì–´ ê°€ì§‘ë‹ˆë‹¤. ì–´ë–¤ ê¶Œí•œì€ ì—°ë°©ì •ë¶€ë§Œ ê°€ì§€ê³ , ì–´ë–¤ ê¶Œí•œì€ ì£¼ì •ë¶€ê°€ ê°€ì§€ë©°, ì¼ë¶€ëŠ” í•¨ê»˜ ê³µìœ í•©ë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [46, 47, 48, 49, 50],
                    "narrative": "ì—°ë°©ì •ë¶€ë§Œ ê°€ì§€ëŠ” ê¶Œí•œìœ¼ë¡œëŠ” {46}ì´ ìˆìŠµë‹ˆë‹¤ (Q.46). ì£¼ì •ë¶€ì— ì†í•˜ëŠ” ê¶Œí•œìœ¼ë¡œëŠ” {47}ì´ ìˆìŠµë‹ˆë‹¤ (Q.47, Q.48). ë‹¹ì‹  ì£¼ì˜ ì£¼ì§€ì‚¬ ì´ë¦„ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.49). ë‹¹ì‹  ì£¼ì˜ ì£¼ë„ë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.50)."
                },
                {
                    "questions": [51, 52, 53, 54],
                    "narrative": "ë¯¸êµ­ì˜ ë‘ ì£¼ìš” ì •ë‹¹ì€ {51}ì…ë‹ˆë‹¤ (Q.51). í˜„ì¬ ëŒ€í†µë ¹ì˜ ì •ë‹¹ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.52). í˜„ì¬ í•˜ì›ì˜ì¥ ì´ë¦„ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤ (Q.53). ì£¼ì§€ì‚¬ëŠ” {54}ì˜ ìˆ˜ì¥ì…ë‹ˆë‹¤ (Q.54)."
                }
            ]
        },
        {
            "chapterId": 4,
            "title": "ì„ ê±°ì™€ íˆ¬í‘œ: ë¯¼ì£¼ì£¼ì˜ì˜ ì‹¤ì²œ",
            "introduction": "ë¯¼ì£¼ì£¼ì˜ëŠ” êµ­ë¯¼ì´ ì§ì ‘ ì°¸ì—¬í•  ë•Œ ì‚´ì•„ ìˆ¨ì‰½ë‹ˆë‹¤. íˆ¬í‘œëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì‹œë¯¼ì˜ ê¶Œë¦¬ì´ì ì±…ì„ì…ë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [55, 56, 57, 58, 59, 60, 61, 62],
                    "narrative": "ëŒ€í†µë ¹ ì„ ê±°ì—ì„œ ëŒ€í†µë ¹ì„ ì„ ì¶œí•˜ëŠ” ì‚¬ëŒì€ {55}ì…ë‹ˆë‹¤ (Q.55). ì„ ê±°ì¸ë‹¨ì—ì„œ ê° ì£¼ê°€ ê°€ì§€ëŠ” ì„ ê±°ì¸ ìˆ˜ëŠ” {56}ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤ (Q.56). ì„ ê±°ì¸ë‹¨ì˜ ì´ ì„ ê±°ì¸ ìˆ˜ëŠ” {57}ëª…ì…ë‹ˆë‹¤ (Q.57). ëŒ€í†µë ¹ ì„ ê±°ì—ì„œ ì´ê¸°ë ¤ë©´ ìµœì†Œ {58}í‘œì˜ ì„ ê±°ì¸ë‹¨ í‘œê°€ í•„ìš”í•©ë‹ˆë‹¤ (Q.58). ëŒ€í†µë ¹ì´ ì¬ì„ ë  ìˆ˜ ì—†ëŠ” ì´ìœ ëŠ” {59} ë•Œë¬¸ì…ë‹ˆë‹¤ (Q.59). ëŒ€í†µë ¹ì´ {60}ì„¸ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤ (Q.60). ëŒ€í†µë ¹ ì„ê¸°ëŠ” {61}ì…ë‹ˆë‹¤ (Q.61). ëŒ€í†µë ¹ì€ ìµœëŒ€ {62}ë²ˆ ì„ ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (Q.62)."
                }
            ]
        },
        {
            "chapterId": 5,
            "title": "ì‹œë¯¼ì˜ ê¶Œë¦¬ì™€ ì±…ì„",
            "introduction": "ë¯¸êµ­ ì‹œë¯¼ì´ ëœë‹¤ëŠ” ê²ƒì€ íŠ¹ë³„í•œ ê¶Œë¦¬ë¥¼ ëˆ„ë¦¬ëŠ” ë™ì‹œì— ì¤‘ìš”í•œ ì±…ì„ì„ ì§€ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [63, 64, 65, 66, 67, 68, 69, 70, 71, 72],
                    "narrative": "íˆ¬í‘œê¶Œì— ê´€í•œ í—Œë²• ìˆ˜ì • ì¡°í•­ì€ {63}ì…ë‹ˆë‹¤ (Q.63). ì‹œë¯¼ë§Œ ê°€ì§€ëŠ” ê¶Œë¦¬ëŠ” {64}ì…ë‹ˆë‹¤ (Q.64). ë¯¸êµ­ì— ê±°ì£¼í•˜ëŠ” ëª¨ë“  ì‚¬ëŒì—ê²ŒëŠ” {65} ê°™ì€ ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤ (Q.65). ì¶©ì„± ì„œì•½ì„ í•  ë•Œ, ìš°ë¦¬ëŠ” {66}ì— ëŒ€í•œ ì¶©ì„±ì„ ë³´ì—¬ì¤ë‹ˆë‹¤ (Q.66). ì‹œë¯¼ì´ ë  ë•Œ í•˜ëŠ” ì•½ì† ì¤‘ í•˜ë‚˜ëŠ” {67}ì…ë‹ˆë‹¤ (Q.67). ë¯¸êµ­ ì‹œë¯¼ì´ ë˜ë ¤ë©´ ìµœì†Œ {68}ì„¸ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤ (Q.68). ì‹œë¯¼ì˜ ì¤‘ìš”í•œ ì±…ì„ ì¤‘ í•˜ë‚˜ëŠ” {69}ì…ë‹ˆë‹¤ (Q.69). ì‹œë¯¼ì˜ ê¶Œë¦¬ ì¤‘ í•˜ë‚˜ëŠ” {70}ì…ë‹ˆë‹¤ (Q.70). ë¯¼ì£¼ì£¼ì˜ì— ì°¸ì—¬í•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” {71}ì´ ìˆìŠµë‹ˆë‹¤ (Q.71). ì‹œë¯¼ì˜ ë§ˆì§€ë§‰ ë‚ ì— í•˜ëŠ” ì¼ì€ {72}ì…ë‹ˆë‹¤ (Q.72)."
                }
            ]
        },
        {
            "chapterId": 6,
            "title": "ë¯¸êµ­ì˜ íƒ„ìƒ: ì‹ë¯¼ì§€ì—ì„œ ë…ë¦½ê¹Œì§€",
            "introduction": "ë¯¸êµ­ì˜ ì—­ì‚¬ëŠ” ììœ ë¥¼ í–¥í•œ íˆ¬ìŸì˜ ì—°ì†ì´ì—ˆìŠµë‹ˆë‹¤. ì‹ë¯¼ì§€ ì‹œëŒ€ë¶€í„° ë…ë¦½ ì „ìŸ, ê·¸ë¦¬ê³  ìƒˆë¡œìš´ ë‚˜ë¼ì˜ ê±´ì„¤ê¹Œì§€ì˜ ì—¬ì •ì„ ë”°ë¼ê°€ ë´…ì‹œë‹¤.",
            "question_groups": [
                {
                    "questions": [73, 74, 75, 76, 77, 78, 79, 80],
                    "narrative": "ì‹ë¯¼ì§€ ì£¼ë¯¼ë“¤ì´ ë¯¸êµ­ì— ì˜¨ ì´ìœ ëŠ” {73}ì…ë‹ˆë‹¤ (Q.73). ìœ ëŸ½ì¸ë“¤ì´ ì˜¤ê¸° ì „ì— ë¯¸êµ­ì—ëŠ” {74}ì´ ì‚´ì•˜ìŠµë‹ˆë‹¤ (Q.74). ì‹ë¯¼ì§€ ì‚¬ëŒë“¤ì´ ì˜êµ­ì— ë°˜ëŒ€í•œ ì´ìœ ëŠ” {75} ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤ (Q.75). ë…ë¦½ì„ ì–¸ì„œë¥¼ ì“´ ì‚¬ëŒì€ {76}ì…ë‹ˆë‹¤ (Q.76). ë…ë¦½ì„ ì–¸ì„œê°€ ì±„íƒëœ ë‚ ì€ {77}ì…ë‹ˆë‹¤ (Q.77). ìµœì´ˆì˜ 13ê°œ ì£¼ëŠ” {78}ì…ë‹ˆë‹¤ (Q.78). í—Œë²• ì œì • íšŒì˜ëŠ” {79}ì—ì„œ ì—´ë ¸ìŠµë‹ˆë‹¤ (Q.79). í—Œë²•ì´ ì‘ì„±ëœ í•´ëŠ” {80}ì…ë‹ˆë‹¤ (Q.80)."
                },
                {
                    "questions": [81, 82, 83, 84, 85, 86, 87, 88, 89],
                    "narrative": "ì—°ë°©ì£¼ì˜ ë…¼ì„¤ì€ {81}ì„ ì§€ì§€í–ˆìŠµë‹ˆë‹¤ (Q.81). ê±´êµ­ì˜ ì•„ë²„ì§€ ì¤‘ í•œ ëª…ì€ {82}ì…ë‹ˆë‹¤ (Q.82). í—Œë²•ì˜ ì•„ë²„ì§€ë¡œ ë¶ˆë¦¬ëŠ” ì‚¬ëŒì€ {83}ì…ë‹ˆë‹¤ (Q.83). ìµœì´ˆì˜ ëŒ€í†µë ¹ì€ {84}ì…ë‹ˆë‹¤ (Q.84). ë¯¸êµ­ ë…ë¦½ ì „ìŸì—ì„œ ë¯¸êµ­ê³¼ ì‹¸ìš´ ë‚˜ë¼ëŠ” {85}ì…ë‹ˆë‹¤ (Q.85). ë…ë¦½ ì „ìŸ ì¤‘ ë¯¸êµ­ êµ°ëŒ€ì˜ ì´ì‚¬ë ¹ê´€ì€ {86}ì´ì—ˆìŠµë‹ˆë‹¤ (Q.86). ë…ë¦½ì„ ì–¸ì„œê°€ í•œ ì¼ì€ {87}ì…ë‹ˆë‹¤ (Q.87). ë…ë¦½ì„ ì–¸ì„œì˜ ì¤‘ìš”í•œ ìƒê° ë‘ ê°€ì§€ëŠ” {88}ì…ë‹ˆë‹¤ (Q.88). ììœ ë€ {89}ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤ (Q.89)."
                }
            ]
        },
        {
            "chapterId": 7,
            "title": "ì‹œë ¨ê³¼ ì„±ì¥: 1800ë…„ëŒ€ë¶€í„° í˜„ëŒ€ê¹Œì§€",
            "introduction": "ë¯¸êµ­ì€ ë‚¨ë¶ì „ìŸ, ì„¸ê³„ëŒ€ì „, ë¯¼ê¶Œìš´ë™ ë“± ìˆ˜ë§ì€ ì‹œë ¨ì„ ê²ªìœ¼ë©° ì„±ì¥í–ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì—­ì‚¬ì  ì‚¬ê±´ë“¤ì´ ì˜¤ëŠ˜ë‚ ì˜ ë¯¸êµ­ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [90, 91, 92, 93, 94, 95, 96, 97, 98, 99],
                    "narrative": "ë¯¸êµ­ì´ 1803ë…„ í”„ë‘ìŠ¤ë¡œë¶€í„° ë§¤ì…í•œ ì˜í† ëŠ” {90}ì…ë‹ˆë‹¤ (Q.90). 1800ë…„ëŒ€ì— ë¯¸êµ­ì´ ì¹˜ë¥¸ ì „ìŸì€ {91}ì…ë‹ˆë‹¤ (Q.91). ë¯¸êµ­ ì—­ì‚¬ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì‚¬ê±´ ì¤‘ í•˜ë‚˜ëŠ” {92}ì…ë‹ˆë‹¤ (Q.92). ë‚¨ë¶ì „ìŸì´ ì¼ì–´ë‚œ ë¬¸ì œëŠ” {93}ì´ì—ˆìŠµë‹ˆë‹¤ (Q.93). {94}ëŠ” ë…¸ì˜ˆë“¤ì„ í•´ë°©ì‹œì¼°ìŠµë‹ˆë‹¤ (Q.94). ë‚¨ë¶ì „ìŸ ì¤‘ ëŒ€í†µë ¹ì´ì—ˆë˜ {95}ì€ ë…¸ì˜ˆë“¤ì„ í•´ë°©ì‹œì¼°ìŠµë‹ˆë‹¤ (Q.95). ë‚¨ë¶ì „ìŸ í›„ í†µê³¼ëœ ì¤‘ìš”í•œ ìˆ˜ì •ì•ˆì€ {96}ì…ë‹ˆë‹¤ (Q.96). ì´ ìˆ˜ì •ì•ˆì€ {97}ì„ í–ˆìŠµë‹ˆë‹¤ (Q.97). ìˆ˜ì” B. ì•¤ì„œë‹ˆëŠ” {98}ë¡œ ìœ ëª…í•©ë‹ˆë‹¤ (Q.98). 1800ë…„ëŒ€ ë§ê³¼ 1900ë…„ëŒ€ ì´ˆì— ë¯¸êµ­ìœ¼ë¡œ ì˜¨ ì´ë¯¼ìë“¤ì€ {99}ì—ì„œ ì™”ìŠµë‹ˆë‹¤ (Q.99)."
                },
                {
                    "questions": [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110],
                    "narrative": "1900ë…„ëŒ€ì— ë¯¸êµ­ì´ ì¹˜ë¥¸ ì „ìŸì€ {100}ì…ë‹ˆë‹¤ (Q.100). ë¯¸êµ­ì´ ì œ1ì°¨ ì„¸ê³„ëŒ€ì „ì— ì°¸ì „í•œ ì´ìœ ëŠ” {101} ë•Œë¬¸ì…ë‹ˆë‹¤ (Q.101). ì œ1ì°¨ ì„¸ê³„ëŒ€ì „ ì¤‘ ëŒ€í†µë ¹ì€ {102}ì´ì—ˆìŠµë‹ˆë‹¤ (Q.102). ëŒ€ê³µí™©ê³¼ ì œ2ì°¨ ì„¸ê³„ëŒ€ì „ ì¤‘ ëŒ€í†µë ¹ì€ {103}ì´ì—ˆìŠµë‹ˆë‹¤ (Q.103). ë¯¸êµ­ì´ ì œ2ì°¨ ì„¸ê³„ëŒ€ì „ì— ì°¸ì „í•œ ì´ìœ ëŠ” {104} ë•Œë¬¸ì…ë‹ˆë‹¤ (Q.104). ì œ2ì°¨ ì„¸ê³„ëŒ€ì „ì—ì„œ ë¯¸êµ­ê³¼ ì‹¸ìš´ ë‚˜ë¼ëŠ” {105}ì…ë‹ˆë‹¤ (Q.105). ì œ2ì°¨ ì„¸ê³„ëŒ€ì „ ì „ ì•„ì´ì  í•˜ì›Œ ì¥êµ°ì€ {106}ì´ì—ˆìŠµë‹ˆë‹¤ (Q.106). ëƒ‰ì „ ì¤‘ ë¯¸êµ­ì˜ ì£¼ìš” ê´€ì‹¬ì‚¬ëŠ” {107}ì´ì—ˆìŠµë‹ˆë‹¤ (Q.107). ëƒ‰ì „ ì¤‘ ë¯¸êµ­ê³¼ ëŒ€ë¦½í•œ ë‚˜ë¼ëŠ” {108}ì…ë‹ˆë‹¤ (Q.108). ë¯¸êµ­ì´ í•œêµ­ì „ìŸì— ì°¸ì „í•œ ì´ìœ ëŠ” {109} ë•Œë¬¸ì…ë‹ˆë‹¤ (Q.109). ë¯¸êµ­ì´ ë² íŠ¸ë‚¨ì „ìŸì— ì°¸ì „í•œ ì´ìœ ëŠ” {110} ë•Œë¬¸ì…ë‹ˆë‹¤ (Q.110)."
                },
                {
                    "questions": [111, 112, 113, 114, 115, 116, 117, 118],
                    "narrative": "ë§ˆí‹´ ë£¨í„° í‚¹ ì£¼ë‹ˆì–´ëŠ” {111}ì„ í–ˆìŠµë‹ˆë‹¤ (Q.111). 9/11 í…ŒëŸ¬ ì‚¬ê±´ì€ {112}ì— ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤ (Q.112). ì•„ë©”ë¦¬ì¹´ ì›ì£¼ë¯¼ ë¶€ì¡±ì€ {113}ì…ë‹ˆë‹¤ (Q.113). ë¯¸êµ­ ì—­ì‚¬ì—ì„œ ê¸´ ê°•ì€ {114}ì…ë‹ˆë‹¤ (Q.114). ë¯¸êµ­ì˜ í° ì‚°ë§¥ì€ {115}ì…ë‹ˆë‹¤ (Q.115). ë¯¸êµ­ì˜ ì˜í† ëŠ” {116}ì…ë‹ˆë‹¤ (Q.116). ë¯¸êµ­ê³¼ êµ­ê²½ì„ ì ‘í•œ ë‚˜ë¼ëŠ” {117}ì…ë‹ˆë‹¤ (Q.117). ë¯¸êµ­ì˜ ì£¼ë„ëŠ” {118}ì…ë‹ˆë‹¤ (Q.118)."
                }
            ]
        },
        {
            "chapterId": 8,
            "title": "ìƒì§•ê³¼ ì „í†µ: ë¯¸êµ­ì„ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ê²ƒë“¤",
            "introduction": "ë¯¸êµ­ì„ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ê²ƒì€ ë²•ê³¼ ì—­ì‚¬ë¿ë§Œì´ ì•„ë‹™ë‹ˆë‹¤. êµ­ê¸°, êµ­ê°€, ììœ ì˜ ì—¬ì‹ ìƒ ê°™ì€ ìƒì§•ë“¤ê³¼ ë…ë¦½ê¸°ë…ì¼, ì¶”ìˆ˜ê°ì‚¬ì ˆ ê°™ì€ íœ´ì¼ë“¤ì´ ë¯¸êµ­ì¸ì˜ ì •ì²´ì„±ì„ ë§Œë“­ë‹ˆë‹¤.",
            "question_groups": [
                {
                    "questions": [119, 120, 121, 122, 123, 124],
                    "narrative": "ë¯¸êµ­ì˜ ìˆ˜ë„ëŠ” {119}ì…ë‹ˆë‹¤ (Q.119). ììœ ì˜ ì—¬ì‹ ìƒì€ {120}ì— ìˆìŠµë‹ˆë‹¤ (Q.120). ë¯¸êµ­ êµ­ê¸°ì—ëŠ” {121}ê°œì˜ ì¤„ë¬´ëŠ¬ê°€ ìˆëŠ”ë°, ì´ëŠ” ìµœì´ˆì˜ 13ê°œ ì‹ë¯¼ì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤ (Q.121). êµ­ê¸°ì—ëŠ” {122}ê°œì˜ ë³„ì´ ìˆëŠ”ë°, ì´ëŠ” 50ê°œ ì£¼ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤ (Q.122). ë¯¸êµ­ êµ­ê°€ì˜ ì´ë¦„ì€ {123}ì…ë‹ˆë‹¤ (Q.123). ë¯¸êµ­ì˜ êµ­ê°€ ëª¨í† ëŠ” {124}ì…ë‹ˆë‹¤ (Q.124)."
                },
                {
                    "questions": [125, 126, 127, 128],
                    "narrative": "ë…ë¦½ê¸°ë…ì¼ì€ {125}ì„ ê¸°ë…í•©ë‹ˆë‹¤ (Q.125). ë¯¸êµ­ì˜ êµ­ê°€ ê³µíœ´ì¼ë¡œëŠ” {126}ì´ ìˆìŠµë‹ˆë‹¤ (Q.126). ì¶”ìˆ˜ê°ì‚¬ì ˆì€ {127}ì— ê¸°ë…í•©ë‹ˆë‹¤ (Q.127). ëŒ€í†µë ¹ì˜ ë‚ ì€ {128}ì„ ê¸°ë…í•©ë‹ˆë‹¤ (Q.128)."
                }
            ]
        }
    ]
    
    # ìŠ¤í† ë¦¬ ìƒì„±
    story = {
        "civicsStory": []
    }
    
    for chapter_def in story_structure:
        chapter = {
            "chapterId": chapter_def["chapterId"],
            "translations": {
                "ko": {
                    "title": chapter_def["title"],
                    "introduction": chapter_def["introduction"]
                }
            },
            "sections": []
        }
        
        for group in chapter_def["question_groups"]:
            # ë‹µë³€ ìˆ˜ì§‘
            answers = {}
            linked_questions = []
            
            for q_id in group["questions"]:
                if q_id in questions_by_id:
                    q = questions_by_id[q_id]
                    linked_questions.append(q_id)
                    
                    # ì²« ë²ˆì§¸ ì •ë‹µ ì‚¬ìš©
                    if q.get('correctAnswers'):
                        answer_text = q['correctAnswers'][0].get('text', '')
                        answers[q_id] = answer_text
            
            # ë‚´ëŸ¬í‹°ë¸Œ ìƒì„± (ê°„ë‹¨í•œ ë²„ì „ - ì‹¤ì œë¡œëŠ” ë” ìì—°ìŠ¤ëŸ½ê²Œ)
            content_ko = []
            narrative = group.get("narrative", "")
            
            # ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ìƒì„± (ì‹¤ì œë¡œëŠ” ë” ë³µì¡í•œ ë¡œì§ í•„ìš”)
            content_ko.append({
                "type": "normal",
                "text": f"ì´ ì„¹ì…˜ì€ Q.{linked_questions[0]}"
            })
            
            if len(linked_questions) > 1:
                content_ko.append({
                    "type": "normal",
                    "text": f"-Q.{linked_questions[-1]}"
                })
            
            content_ko.append({
                "type": "normal",
                "text": "ì„ ë‹¤ë£¹ë‹ˆë‹¤. "
            })
            
            # ê° ì§ˆë¬¸ì˜ ë‹µë³€ ì¶”ê°€
            for q_id in linked_questions:
                if q_id in questions_by_id:
                    q = questions_by_id[q_id]
                    content_ko.append({
                        "type": "normal",
                        "text": f"Q.{q_id}: {q['question']} "
                    })
                    
                    if q.get('correctAnswers'):
                        answer_parts = create_answer_text(q['correctAnswers'][0]['text'])
                        content_ko.extend(answer_parts)
                    
                    content_ko.append({
                        "type": "normal",
                        "text": ". "
                    })
            
            section = {
                "content_ko": content_ko,
                "linkedQuestions": linked_questions
            }
            
            chapter["sections"].append(section)
        
        story["civicsStory"].append(chapter)
    
    # JSON ì €ì¥
    print(f"\nğŸ’¾ ì €ì¥: {output_file.name}")
    
    with open(output_file, 'w', encoding='utf-8') as f:
        json.dump(story, f, ensure_ascii=False, indent=2)
    
    # í†µê³„
    all_linked = set()
    for chapter in story['civicsStory']:
        for section in chapter['sections']:
            all_linked.update(section.get('linkedQuestions', []))
    
    print(f"\nğŸ“Š í†µê³„:")
    print(f"  â€¢ ì´ ì±•í„° ìˆ˜: {len(story['civicsStory'])}ê°œ")
    
    total_sections = sum(len(ch['sections']) for ch in story['civicsStory'])
    print(f"  â€¢ ì´ ì„¹ì…˜ ìˆ˜: {total_sections}ê°œ")
    print(f"  â€¢ ì—°ê²°ëœ ì§ˆë¬¸ ìˆ˜: {len(all_linked)}ê°œ")
    
    missing = set(range(1, 129)) - all_linked
    if missing:
        print(f"\nâš ï¸  ëˆ„ë½ëœ ì§ˆë¬¸: {sorted(missing)}")
    else:
        print(f"\nâœ… ëª¨ë“  128ê°œ ì§ˆë¬¸ì´ í¬í•¨ë˜ì—ˆìŠµë‹ˆë‹¤!")
    
    return story

def main():
    print("=" * 60)
    print("ğŸ¯ 128ë¬¸ì œ ê¸°ë°˜ ì™„ì „í•œ ìŠ¤í† ë¦¬ ìƒì„±")
    print("=" * 60)
    print()
    
    # ê²½ë¡œ ì„¤ì •
    script_dir = Path(__file__).parent
    project_dir = script_dir.parent
    data_dir = project_dir / 'data'
    
    questions_file = data_dir / 'interview_questions_ko.json'
    output_file = data_dir / 'question_story.json'
    
    # ìƒì„±
    story = create_story_from_questions(questions_file, output_file)
    
    # ìµœì¢… ê²°ê³¼
    print("\n" + "=" * 60)
    print("ğŸ“Š ìµœì¢… ê²°ê³¼")
    print("=" * 60)
    print(f"âœ… ìƒì„± ì™„ë£Œ")
    print(f"ğŸ“ ì €ì¥ ìœ„ì¹˜: {output_file}")
    print("\nğŸ‰ 128ë¬¸ì œ ê¸°ë°˜ ì™„ì „í•œ ìŠ¤í† ë¦¬ ìƒì„± ì™„ë£Œ!")

if __name__ == "__main__":
    main()
